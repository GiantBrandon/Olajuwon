var Ne=Object.defineProperty,Ge=Object.defineProperties;var He=Object.getOwnPropertyDescriptors;var ge=Object.getOwnPropertySymbols;var We=Object.prototype.hasOwnProperty,ze=Object.prototype.propertyIsEnumerable;var me=(t,r,n)=>r in t?Ne(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n,P=(t,r)=>{for(var n in r||(r={}))We.call(r,n)&&me(t,n,r[n]);if(ge)for(var n of ge(r))ze.call(r,n)&&me(t,n,r[n]);return t},R=(t,r)=>Ge(t,He(r));import{j as e,S as Se,r as l,R as _,n as w,a as d,s as L,P as A,T as Z,B as T,F as N,I as G,b as je,c as $e,d as ve,V as Ue,e as _e,G as C,C as Je,f as Ve,D as qe,g as ne,h as Ze,i as Ke,k as K,A as oe,l as Qe,m as Ye,Q as Xe,M as et,o as ye,p as tt,q as st,W as rt,t as xe,u as nt,v as Q,w as ae,x as ie,y as Ce,z as Y,E as le,H as ce,J as ot,K as be,L as at,N as it,O as lt,U as ct,X as ht,Y as dt,Z as ke,_ as I,$ as D,a0 as ut,a1 as pt,a2 as Te,a3 as H,a4 as ft,a5 as gt,a6 as we,a7 as mt,a8 as St,a9 as vt,aa as yt,ab as xt,ac as Ct,ad as bt,ae as kt,af as Tt,ag as J,ah as wt,ai as Mt,aj as Pt,ak as Bt,al as Rt,am as Et,an as Ft,ao as Lt,ap as It,aq as Dt,ar as Ot,as as W,at as At}from"./vendor.2e5d1be5.js";const Nt=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerpolicy&&(a.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?a.credentials="include":o.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}};Nt();const Me=({children:t})=>e(Se,{children:t}),Gt=({drawing:t,isActive:r,activate:n})=>{const[s,o]=l.exports.useState(!1),a=()=>{t&&!r&&n()};return l.exports.useEffect(()=>{s&&a()}),e(_,{checked:r,onMouseOver:()=>o(!0),onMouseLeave:()=>o(!1)})},Ht=w.svg({position:"absolute"}),Wt=w.div(()=>({display:"flex",flexDirection:"column",border:"1px solid #FFFFFF"})),zt=w.div({display:"inline-flex",zIndex:1}),jt=()=>{const[t,r]=l.exports.useState([]),[n,s]=l.exports.useState(!1);return d(Wt,{onMouseDown:()=>{s(!0),r([])},onMouseUp:()=>s(!1),onMouseLeave:()=>s(!1),children:[(()=>{const a=[];for(let i=0;i<t.length-1;i++)a.push(e("line",{x1:t[i].x*42+21,y1:t[i].y*42+21,x2:t[i+1].x*42+21,y2:t[i+1].y*42+21,stroke:"#FFFFFF",strokeWidth:"2"},i));return e(Ht,{height:"212",width:"212",children:a})})(),Array(5).fill(0).map((a,i)=>e(zt,{children:Array(5).fill(0).map((f,y)=>e(Gt,{drawing:n,isActive:t.filter(g=>g.x===y&&g.y===i).length>0,activate:()=>r([...t,{x:y,y:i}])}))}))]})},$t=L(A)(({theme:t})=>({padding:t.spacing(2),display:"flex",flexDirection:"column"})),Ut=L(Z)({marginBottom:"8px"}),_t=L(T)({marginTop:"8px"}),Jt=()=>{const[t,r]=l.exports.useState(!0),[n,s]=l.exports.useState(!0);return e(Me,{children:d($t,{children:[e(Ut,{label:"Username"}),e("div",{}),t?e(jt,{}):d(N,{children:[e(G,{htmlFor:"standard-adornment-password",children:"Password"}),e(je,{id:"standard-adornment-password",type:n?"password":"text",endAdornment:e($e,{position:"end",children:e(ve,{"aria-label":"toggle password visibility",onClick:()=>s(!n),children:n?e(Ue,{}):e(_e,{})})})})]}),d(C,{children:[e(_t,{variant:"contained",color:"primary",onClick:()=>alert("ya, so this doesn't do anything yet"),children:"Submit"}),e(Je,{checked:t,icon:e(Ve,{}),checkedIcon:e(qe,{}),onChange:()=>r(!t)})]})]})})},he=()=>location.hostname==="localhost"?"http://localhost:8080":"https://api.kyojin.dev:443",Vt=t=>ne.get(`${he()}/v1/recentgames/${t}`).then(r=>r.data),qt=()=>ne.get(`${he()}/v1/players`).then(t=>t.data),Zt=()=>ne.get(`${he()}/v1/match`).then(t=>t.data),Kt=w.p({color:Ze[500]}),Qt=w.p({color:Ke[500]}),de=t=>{const{player:r,low:n,high:s}=t,o=(a,i,f,y)=>i<=f?d(Kt,{children:[a,": ",i]}):i>=y?d(Qt,{children:[a,": ",i]}):d("p",{children:[a,": ",i]});return d(K,{children:[o("Points",r.points,n.points,s.points),o("Rebounds",r.totReb,n.totReb,s.totReb),o("Assists",r.assists,n.assists,s.assists),o("Blocks",r.blocks,n.blocks,s.blocks),o("Steals",r.steals,n.steals,s.steals),o("Field Goal %",r.fgp,n.fgp,s.fgp),o("3 Point %",r.tpp,n.tpp,s.tpp),o("Free Throw %",r.ftp,n.ftp,s.ftp)]})},ue=L(A)(({theme:t})=>({padding:t.spacing(2),margin:t.spacing(2)})),pe=L(Z)({minWidth:"240px"}),Pe={assists:-1,blocks:-1,defReb:-1,fga:-1,fgm:-1,fgp:-1,fta:-1,ftm:-1,ftp:-1,min:-1,offReb:-1,pFouls:-1,playerId:-1,plusMinus:-1,points:-1,steals:-1,teamId:-1,totReb:-1,tpa:-1,tpm:-1,tpp:-1,turnovers:-1},Yt=()=>{const[t,r]=l.exports.useState([]),[n,s]=l.exports.useState([void 0,void 0,void 0]),[o,a]=l.exports.useState(Pe),[i,f]=l.exports.useState(Pe);l.exports.useEffect(()=>{qt().then(g=>r(g.players))},[]);const y=(g,m)=>{Vt(m.playerId).then(M=>{const S=[...n];S[g]=M.stats,s(S)})};return l.exports.useEffect(()=>{const g=P({},o),m=P({},i);n.filter(S=>S!=null).forEach(S=>{Object.keys(S).forEach(v=>{(g[v]==-1||g[v]<S[v])&&(g[v]=S[v]),(m[v]==-1||m[v]>S[v])&&(m[v]=S[v])})}),a(g),f(m)},[n]),e(Me,{children:d(C,{container:!0,spacing:1,children:[d(ue,{children:[e(oe,{options:t,getOptionLabel:g=>g.firstName+" "+g.lastName,onChange:(g,m)=>y(0,m||{firstName:"",lastName:"",playerId:0}),renderInput:g=>e(pe,R(P({},g),{value:"Player",variant:"outlined"}))}),n[0]&&e(de,{player:n[0],low:i,high:o})]}),d(ue,{children:[e(oe,{options:t,getOptionLabel:g=>g.firstName+" "+g.lastName,onChange:(g,m)=>y(1,m||{firstName:"",lastName:"",playerId:0}),renderInput:g=>e(pe,R(P({},g),{value:"Player",variant:"outlined"}))}),n[1]&&e(de,{player:n[1],low:i,high:o})]}),d(ue,{children:[e(oe,{options:t,getOptionLabel:g=>g.firstName+" "+g.lastName,onChange:(g,m)=>y(2,m||{firstName:"",lastName:"",playerId:0}),renderInput:g=>e(pe,R(P({},g),{value:"Player",variant:"outlined"}))}),n[2]&&e(de,{player:n[2],low:i,high:o})]})]})})},Xt=w.div(t=>({height:"10%",width:"10%",display:"grid",justifyContent:"center",alignContent:"center",backgroundColor:t.hover?Qe[400]:void 0})),es=(t,r,n)=>{switch(t){case"Untouched":return e(rt,{fontSize:r,color:n.untouched});case"Hit":return e(st,{fontSize:r,color:n.hit});case"Miss":return e(tt,{fontSize:r,color:n.miss});case"Ship":return e(ye,{fontSize:r,color:n.ship});case"Target":return e(et,{fontSize:r,color:n.target});default:return e(Xe,{fontSize:r})}},ts=({position:t,status:r,colors:n,hover:s,size:o,setHover:a,onClick:i})=>e(Ye,{title:`${t}: ${r}`,disableInteractive:!0,children:e(Xt,{hover:s,onMouseEnter:a,onClick:i,children:es(r,o,n)})}),ss=w(A)(t=>({width:`${t.size}px`,height:`${t.size}px`})),rs=w(C)({height:"100%"}),ns=t=>{switch(t){case"large":return 360;case"medium":return 240;case"small":return 160}},Be=({board:t,colors:r,size:n="large",hovered:s,setHover:o,onClick:a})=>e(ss,{size:ns(n),onMouseLeave:()=>o(-100),elevation:2,children:e(rs,{container:!0,columns:10,children:t==null?void 0:t.map((i,f)=>e(ts,{size:n,colors:r,position:f/10,status:i,hover:s.includes(f),setHover:()=>o(f),onClick:()=>a(f)},f))})}),os=w(xe)(t=>({maxWidth:`${t.width}px`})),as=t=>{switch(t){case"large":return 360;case"medium":return 240;case"small":return 160}},Re=({player:t,size:r="large"})=>{const[n,s]=l.exports.useState(),{active:o,targets:a,toggleTarget:i}=l.exports.useContext(fe),f=a[t.name],y=t.board.map((m,M)=>(f==null?void 0:f.find(S=>S==M))!=null?"Target":m),g=m=>{o&&i(t.name,m)};return d("div",{children:[e(Be,{board:y,colors:t.colors,size:r,hovered:n!=null?[n]:[],setHover:s,onClick:g}),e(os,{width:as(r),avatar:e(nt,{children:t.shipCount}),label:t.name,color:t.order==0?"primary":"default",onDelete:t.cheater?()=>{}:void 0})]})},is=({enemies:t})=>{const[r,n]=l.exports.useState(0),[s,o]=l.exports.useState("small"),a=l.exports.useRef(null);return l.exports.useEffect(()=>{if(a.current){const i=a.current.offsetHeight,f=a.current.offsetWidth;Math.floor(i/384)*Math.floor(f/384)>=t.length?(o("large"),n(Math.floor(i/384))):Math.floor(i/264)*Math.floor(f/264)>=t.length?(o("medium"),n(Math.floor(i/264))):(o("small"),n(Math.floor(i/184)>0?Math.floor(i/184):1))}},[a,t]),e(C,{height:"100%",ref:a,direction:"column",container:!0,item:!0,xs:!0,columns:r,justifyContent:"space-around",children:t.map(i=>e(C,{item:!0,xs:1,children:e(Re,{player:i,size:s},i.name)},i.name))})},ls=(t,r)=>{const n=localStorage.getItem(t);return n||r},Ee=({open:t,handleClose:r})=>{const[n,s]=l.exports.useState(ls("alert","none"));return d(Q,{open:t,onClose:r,children:[e(ae,{children:"Preferences"}),d(ie,{children:[e("h3",{children:"Alert Type"}),d(Ce,{defaultValue:n,value:n,onChange:i=>{s(i.target.value)},children:[e(Y,{value:"none",control:e(_,{}),label:"none"}),e(Y,{value:"horn",control:e(_,{}),label:"ship horn"}),e(Y,{value:"gun",control:e(_,{}),label:"gun cock"})]})]}),d(le,{children:[e(T,{onClick:r,children:"Cancel"}),e(T,{onClick:()=>{localStorage.setItem("alert",n),r()},children:"Save"})]})]})},cs=L(A)({width:"360px",height:"100%",overflow:"auto"}),hs=({self:t,messages:r})=>{const[n,s]=l.exports.useState(!1),[o,a]=l.exports.useState(0),{targets:i,resetTargets:f,active:y}=l.exports.useContext(fe),{sendMessage:g}=l.exports.useContext(F),m=S=>{g(t.name,"FIRE",{targets:S}),a(-1),f()};l.exports.useEffect(()=>{t.order==0&&a(30)},[t]),l.exports.useEffect(()=>{let S;return t.order==0?(o==0&&m({}),S=setInterval(()=>{a(v=>v-1)},1e3)):t.order>0&&o!==0&&clearInterval(S),()=>clearInterval(S)},[t,o]);const M=()=>Object.keys(i).flatMap(S=>i[S]).length;return d(C,{item:!0,container:!0,xs:"auto",direction:"column",alignItems:"center",spacing:1,children:[e(C,{item:!0,xs:"auto",children:e(Re,{player:t,size:"large"})}),e(C,{item:!0,xs:"auto",children:d(ce,{variant:"outlined",children:[e(T,{startIcon:e(ot,{}),onClick:()=>g(t.name,"RESET",{}),children:"Reset"}),e(T,{startIcon:e(be,{}),onClick:()=>s(!0),children:"Preferences"})]})}),y&&e(C,{item:!0,xs:"auto",children:d(ce,{variant:"outlined",children:[e(T,{startIcon:e(at,{}),disabled:M()==0&&t.shipCount!=0||M()>t.shipCount,onClick:()=>m(i),children:"Fire"}),e(T,{startIcon:e(it,{}),disabled:M()==0,onClick:f,children:"Clear Targets"})]})}),t.order==0&&e(C,{item:!0,xs:"auto",children:e(xe,{icon:e(lt,{}),label:o,color:o>20?"success":o>10?"warning":"error"})}),e(C,{item:!0,xs:!0,overflow:"scroll",children:e(cs,{children:e(ct,{dense:!0,children:r.map((S,v)=>e(ht,{children:e(dt,{primary:S})},v))})})}),e(Ee,{open:n,handleClose:()=>s(!1)})]})};var ds="/assets/distant-ship-horn.32e31f8c.wav",us="/assets/gun-cock.de0abafd.wav";const Fe=new Audio(ds),ps=new Audio(us),fe=ke.createContext({active:!1,targets:{},resetTargets:()=>{},toggleTarget:()=>{}}),fs=w(C)({height:"100vh",padding:"12px"}),gs=({game:t})=>{const[r,n]=l.exports.useState({}),s=(o,a)=>{const i=r[o];r[o]?r[o].find(f=>f==a)==null?n(R(P({},r),{[o]:[...i,a]})):(i.splice(i.indexOf(a),1),n(R(P({},r),{[o]:[...i]}))):n(R(P({},r),{[o]:[a]}))};return l.exports.useEffect(()=>{if(t.self.order==0)switch(localStorage.getItem("alert")){case"none":break;case"horn":Fe.play();break;case"gun":ps.play();break;default:Fe.play();break}},[t.self]),e(fe.Provider,{value:{active:t.self.order==0,targets:r,resetTargets:()=>n({}),toggleTarget:s},children:d(fs,{container:!0,direction:"row",spacing:1,children:[e(hs,{self:t.self,messages:t.messages}),e(is,{enemies:t.others})]})})};L(A)(({theme:t})=>({padding:t.spacing(2)}));const ms=()=>{const[t,r]=l.exports.useState(""),[n,s]=l.exports.useState("success"),[o,a]=l.exports.useState("primary"),[i,f]=l.exports.useState("disabled"),[y,g]=l.exports.useState("inherit"),[m,M]=l.exports.useState("inherit"),{sendMessage:S}=l.exports.useContext(F),v=[e(D,{value:"error",children:"Red"}),e(D,{value:"success",children:"Green"}),e(D,{value:"disabled",children:"Black"}),e(D,{value:"primary",children:"Blue"}),e(D,{value:"inherit",children:"Gray"})];return d(Q,{open:!0,children:[e(ae,{children:"Join Battleship Game"}),e(ie,{children:d(C,{container:!0,spacing:4,children:[e(C,{item:!0,xs:12,children:e(Z,{placeholder:"Enter Name",variant:"standard",label:"Name",value:t,onChange:b=>r(b.target.value),fullWidth:!0})}),e(C,{item:!0,xs:12,children:d(N,{fullWidth:!0,children:[e(G,{id:"ship-label",children:"Ship Color"}),e(I,{id:"ship-label",variant:"standard",value:n,onChange:b=>s(b.target.value),children:v})]})}),e(C,{item:!0,xs:6,children:d(N,{fullWidth:!0,children:[e(G,{id:"untouched-label",children:"Untouched Color"}),e(I,{id:"untouched-label",variant:"standard",value:o,onChange:b=>a(b.target.value),children:v})]})}),e(C,{item:!0,xs:6,children:d(N,{fullWidth:!0,children:[e(G,{id:"hit-label",children:"Hit Color"}),e(I,{id:"hit-label",variant:"standard",value:i,onChange:b=>f(b.target.value),children:v})]})}),e(C,{item:!0,xs:6,children:d(N,{fullWidth:!0,children:[e(G,{id:"miss-label",children:"Miss Color"}),e(I,{id:"miss-label",variant:"standard",value:y,onChange:b=>g(b.target.value),children:v})]})}),e(C,{item:!0,xs:6,children:d(N,{fullWidth:!0,children:[e(G,{id:"target-label",children:"Target Color"}),e(I,{id:"target-label",variant:"standard",value:m,onChange:b=>M(b.target.value),children:v})]})})]})}),d(le,{children:[e(T,{onClick:()=>S(t,"JOIN_ROOM",{colors:{ship:n,hit:i,untouched:o,miss:y,target:m}}),children:"Join"}),e(T,{href:"#/",children:"Cancel"})]})]})},Ss=({game:t,open:r,handleClose:n})=>{const{sendMessage:s}=l.exports.useContext(F),o=a=>d(Te,{children:[e(H,{children:a.name}),e(H,{children:a.shipCount}),e(H,{children:e(gt,{onClick:()=>s(t.self.name,"REMOVE_PLAYER",{delete:a.name})})})]});return e(Q,{open:r,onClose:n,children:d(ut,{children:[e(pt,{children:d(Te,{children:[e(H,{children:"Player"}),e(H,{children:"Ships"}),e(H,{children:"Delete"})]})}),d(ft,{children:[o(t.self),t.others.map(a=>o(a))]})]})})},vs=["Ships","Tetris"],Le=[{type:"Original",description:"Turn Based. Every turn the player gets one shot, that hits a specific player in the spot they choose."},{type:"Equality",description:"Turn Based. Every turn the player gets one shot, that hits every player in the spot they choose."},{type:"Justice",description:"Turn Based. Every turn the player gets a number of shots equal to the amount of ships they have left, that hits a specific player in the spot they choose."},{type:"BattleRoyale",description:"Round Based. Every turn the player gets a number of shots equal to the amount of ships they have left, that hits a specific player in the spot they choose."},{type:"FreeForAll",description:"Turn Based. Every turn the player gets one shot, that hits a specific player in the spot they choose."}],ys=Le.map(t=>t.type),xs=t=>{var r;return(r=Le.find(n=>n.type==t))==null?void 0:r.description},X=["right","down","left","up"],Ie=["Carrier","BattleShip","Destroyer","Submarine","Patrol Boat"],Cs=["O-Block","Hero-Block","S-Block","Z-Block","L-Block","J-Block","T-Block"],bs=({player:t,open:r,handleClose:n,rules:s})=>{const[o,a]=l.exports.useState(s),{sendMessage:i}=l.exports.useContext(F),f=m=>{a(R(P({},s),{shipType:m.target.value}))},y=m=>{a(R(P({},s),{fireType:m.target.value}))},g=()=>{i(t.name,"UPDATE_RULES",{rules:o}),n()};return d(Q,{open:r,onClose:n,children:[e(ae,{children:"Subscribe"}),d(ie,{children:[e("h3",{children:"Fleet Type"}),e(we,{children:"Determines the size and shape of your fleet."}),e(I,{value:o.shipType,onChange:f,children:vs.map(m=>e(D,{value:m,children:m},m))}),e("h3",{children:"Fire Type"}),d(we,{children:[o.fireType,": ",xs(o.fireType)]}),e(I,{value:o.fireType,onChange:y,children:ys.map(m=>e(D,{value:m,children:m},m))})]}),d(le,{children:[e(T,{onClick:n,children:"Cancel"}),e(T,{onClick:g,children:"Save"})]})]})},ks=t=>{const[r,...n]=t;let s=[r];return n.every(a=>{const i=s.some(f=>f!=a&&(Math.abs(f-a)==10||Math.abs(f-a)==1&&Math.floor(f/10)===Math.floor(a/10)));return s=[a,...s],i})?t:[]},Ts=t=>{switch(t){case"right":return r=>(n,s)=>r+n+s*10;case"down":return r=>(n,s)=>r+n*10-s;case"left":return r=>(n,s)=>r-n-s*10;case"up":return r=>(n,s)=>r-n*10+s}},ws=(t,r,n)=>{const s=Ts(n)(r);switch(t){case"Carrier":return[s(0,0),s(1,0),s(2,0),s(3,0),s(4,0)];case"BattleShip":return[s(0,0),s(1,0),s(2,0),s(3,0)];case"Destroyer":return[s(0,0),s(1,0),s(2,0)];case"Submarine":return[s(0,0),s(1,0),s(2,0)];case"Patrol Boat":return[s(0,0),s(1,0)];case"O-Block":return[s(0,0),s(1,0),s(0,1),s(1,1)];case"Hero-Block":return[s(0,0),s(1,0),s(2,0),s(3,0)];case"S-Block":return[s(0,0),s(1,0),s(1,-1),s(2,-1)];case"Z-Block":return[s(0,0),s(1,0),s(1,1),s(2,1)];case"L-Block":return[s(0,0),s(1,0),s(2,0),s(2,-1)];case"J-Block":return[s(0,0),s(1,0),s(2,0),s(2,1)];case"T-Block":return[s(0,0),s(1,0),s(1,1),s(2,0)];default:return[]}},Ms=({game:t})=>{const r=t.rules.shipType=="Ships"?Ie:Cs,[n,s]=l.exports.useState(-100),[o,a]=l.exports.useState(r[0]),[i,f]=l.exports.useState({}),[y,g]=l.exports.useState("right"),[m,M]=l.exports.useState(!1),[S,v]=l.exports.useState(!1),[b,z]=l.exports.useState(!1),{sendMessage:j}=l.exports.useContext(F),$=l.exports.useRef(t.rules),V=Object.values(i).flatMap(k=>k),O=ks(ws(o,n,y)),U=t.others.every(k=>k.shipCount>0)&&t.self.shipCount>0;l.exports.useEffect(()=>{t.rules.shipType!=$.current.shipType&&(f({}),a(r[0]),$.current=t.rules)},[t]);const q=()=>{const k=X.findIndex(u=>y==u);g(k==X.length-1?X[0]:X[k+1])},ee=()=>{const k=P({},i);k[o]=O||[],f(k)},te=()=>{j(t.self.name,"ADD_BOARD",{ships:i})},se=()=>{j(t.self.name,"START_GAME",{})};return d(Se,{height:"100vh",justifyContent:"center",alignItems:"center",children:[e(Be,{board:[...Array(100)].map((k,u)=>V.includes(u)?"Ship":"Untouched"),colors:t.self.colors,hovered:O,setHover:s,onClick:ee}),e(Ce,{row:!0,onChange:k=>a(k.target.value),defaultValue:Ie[0],children:r.map(k=>e(Y,{value:k,control:e(_,{}),label:k},k))}),d(ce,{variant:"outlined",children:[e(T,{startIcon:e(mt,{}),onClick:q,children:"Rotate"}),e(T,{startIcon:e(St,{}),disabled:Object.keys(i).length==r.length,onClick:te,children:"Save"}),e(T,{startIcon:e(vt,{}),disabled:!U,onClick:se,children:"Start"}),e(T,{startIcon:e(yt,{}),onClick:()=>M(!0),children:"Change Rules"}),e(T,{startIcon:e(be,{}),onClick:()=>v(!0),children:"Preferences"}),e(T,{startIcon:e(xt,{}),onClick:()=>z(!0),children:"Players"})]}),e(bs,{player:t.self,open:m,handleClose:()=>M(!1),rules:t.rules}),e(Ee,{open:S,handleClose:()=>v(!1)}),e(Ss,{game:t,open:b,handleClose:()=>z(!1)})]})},F=ke.createContext({sendMessage:()=>{}}),Ps=()=>{const[t,r]=l.exports.useState(),[n,s]=l.exports.useState();l.exports.useEffect(()=>{const a=location.hostname==="localhost"?new WebSocket("ws://localhost:8080/ws"):new WebSocket("wss://api.kyojin.dev:443/ws");a.onmessage=i=>{const f=JSON.parse(i.data);r(f)},s(a)},[]);const o=(a,i,f)=>{n==null||n.send(JSON.stringify(P({name:a,command:i},f)))};if(!t||!("status"in t))return e(F.Provider,{value:{sendMessage:o},children:e(ms,{})});switch(t==null?void 0:t.status){case"Active":return e(F.Provider,{value:{sendMessage:o},children:e(gs,{game:t})});case"Setup":return e(F.Provider,{value:{sendMessage:o},children:e(Ms,{game:t})});case"End":return null}};var De="/assets/background.87e8bba9.png";const Oe=w.img({position:"absolute",bottom:0,right:0}),Bs=w(T)({position:"absolute",right:"16px",bottom:"16px"}),Rs=()=>d(K,{children:[window.innerHeight/window.innerWidth<.65?e(Oe,{src:De,width:"100%",height:"auto"}):e(Oe,{src:De,width:"auto",height:"100%"}),e(Bs,{style:{fontSize:"24px"},color:"primary",size:"large",startIcon:e(Ct,{}),href:"https://tjdthwjd.carrd.co/",children:"Visit Artist"})]}),Es=w(bt)({position:"absolute",right:"16px",top:"16px"}),Ae=w(Z)({margin:"8px"}),Fs=({dark:t,setDark:r})=>{const[n,s]=l.exports.useState(!1),o=kt();return d(K,{children:[d(Es,{ariaLabel:"nav-bar",direction:"down",icon:e(Tt,{}),children:[e(J,{icon:e(wt,{}),tooltipTitle:"Home",onClick:()=>o("/")}),e(J,{icon:e(Mt,{}),tooltipTitle:"Login",onClick:()=>s(!0)}),e(J,{icon:e(ye,{}),tooltipTitle:"Battleship",onClick:()=>o("/Battleship")}),e(J,{icon:e(Pt,{}),tooltipTitle:"Match",onClick:()=>o("/Match")}),e(J,{icon:t?e(Bt,{}):e(Rt,{}),tooltipTitle:"Toggle Dark Mode",onClick:()=>r(!t)})]}),d(Et,{anchor:"left",open:n,onClose:()=>s(!1),children:[e(Ae,{label:"Username",variant:"standard"}),e(Ae,{label:"Password",variant:"standard",type:"password"})]})]})},Ls=w.div({height:"100%"}),Is=w(A)({position:"absolute",bottom:0}),Ds=["primary","warning","success","error"],Os=["\u2664","\u2662","\u2667","\u2661"],As=()=>{const[t,r]=l.exports.useState([[]]),[n,s]=l.exports.useState([]),[o,a]=l.exports.useState([-1,-1]),[i,f]=l.exports.useState([]),[y,g]=l.exports.useState(0),[m,M]=l.exports.useState(0),[S,v]=l.exports.useState(!1),b=l.exports.useRef(null),z=b.current?Math.min(b.current.offsetHeight,b.current.offsetWidth):0;l.exports.useEffect(()=>{Zt().then(u=>{r(u.board),s(u.replacements)})},[]),l.exports.useEffect(()=>{y>100&&r([[]])},[y]),l.exports.useEffect(()=>{if(!(t.length<=1||S)){if(i.length>0){g(y+i.reduce((c,h)=>c+h.length,0));const u=te(i,t);se(u),f([]),v(!0)}else if(t.some(u=>u.some(c=>c===-1))){const u=t.map(c=>c.map(h=>h===-1?n.pop():h));s(n),r(u),f([]),v(!0)}else f(ee(t)),v(!0);setTimeout(()=>v(!1),250)}},[t,S]);const j=(u,c,h,p)=>p<0||p>11||u!==t[h][p]||c.some(x=>x[0]===h&&x[1]===p)?c:V(u,c,h,p),$=(u,c,h,p)=>h<0||h>8||p<0||p>11||u!==t[h][p]||c.some(x=>x[0]===h&&x[1]===p)?c:O(u,c,h,p),V=(u,c,h,p)=>{const x=[...c,[h,p]],B=j(u,x,h,p+1);return j(u,B,h,p-1)},O=(u,c,h,p)=>{const x=[...c,[h,p]],B=$(u,x,h-1,p);return $(u,B,h+1,p)},U=(u,c)=>c.some(h=>h.some(p=>p[0]===u[0]&&p[1]===u[1])),q=(u,c,h)=>u<8&&h[u+1][c]===-1?(h[u+1][c]=h[u][c],h[u][c]=-1,q(u+1,c,h)):h,ee=u=>{let c=[];return u.map((h,p)=>{h.map((x,B)=>{if(x!==-1&&!U([p,B],c)){const E=V(x,[],p,B),re=O(x,[],p,B);E.length>re.length&&E.length>2?c=[...c,E]:re.length>2&&(c=[...c,re])}})}),c},te=(u,c)=>{const h=[...c];return h.map((p,x)=>{h[x]=[...p],p.map((B,E)=>{U([x,E],u)&&(h[x][E]=-1)})}),h},se=u=>{let c=[...u];for(let h=7;h>-1;h--)for(let p=0;p<12;p++)c=q(h,p,c);r(c)},k=(u,c,h,p)=>{const x=t.map(B=>B.slice());x[u][c]=t[h][p],x[h][p]=t[u][c],r(x),a([-1,-1]),M(m+1)};return d(K,{children:[d("p",{children:["Pops: ",y]}),d("p",{children:["Turns: ",m]}),e(Ls,{ref:b,children:e(Is,{sx:{height:z,width:z},children:e(C,{container:!0,children:t.map((u,c)=>u.map((h,p)=>{const x=c===o[0]&&p===o[1];return e(C,{item:!0,xs:1,children:e(ve,{color:U([c,p],i)?"default":Ds[h],onClick:()=>{x?a([-1,-1]):(o[0]===c||o[1]===p)&&(Math.abs(o[0]-c)===1||Math.abs(o[1]-p)===1)?k(o[0],o[1],c,p):a([c,p])},children:h===-1?"-":Os[h]})},`${c},${p}`)}))})})})]})},Ns=()=>{const[t,r]=l.exports.useState(window.matchMedia("(prefers-color-scheme: dark)").matches);console.log(t);const n=Ft({palette:{mode:t?"dark":"light"}});return e(Lt,{children:d(It,{theme:n,children:[e(Dt,{}),e(Ot,{children:d(W,{path:"/",children:[e(W,{index:!0,element:e(Rs,{})}),e(W,{path:"Login",element:e(Jt,{})}),e(W,{path:"Fantasy",element:e(Yt,{})}),e(W,{path:"BattleShip",element:e(Ps,{})}),e(W,{path:"Match",element:e(As,{})})]})}),e(Fs,{dark:t,setDark:r})]})})};At.render(e(Ns,{}),document.getElementById("root"));
